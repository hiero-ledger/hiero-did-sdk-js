= submitCreateDIDRequest API Reference

This document provides a concise API reference for the `submitCreateDIDRequest` function within the Hedera DID SDK for JavaScript.

== Function Signature

This function resume the creation flow of a new Decentralized Identifier (DID) and publish it on the Hedera network using the xref:04-implementation/guides/key-management-modes-guide.adoc#client-managed-secret-mode[Client Managed Secret Mode].

The `submitCreateDIDRequest` function is invoked with `options` and `providers`.` The `providers` parameter encapsulates configuration parameters for interacting with the Hedera network, while the `options` parameter takes current state of the DID creation process and the signature of the signing request. 

[source,js]
----
function submitCreateDIDRequest(
  options: SubmitCreateDIDRequestOptions,
  providers: PublisherProviders,
): Promise<CreateDIDResult>;
----

== Parameters

The function accepts the following parameters:

*   **`providers`**:  (Required) An object encapsulating configuration parameters for interacting with the Hedera network.
*   **`options`**: (Required) An object specifying configuration options for the DID creation request along with the current state of the DID creation process and the signature of the signing request.


=== providers Parameter

The table below details the structure of the `providers` parameter.

[cols="1,1,3",options="header",frame="ends"]
|===
|Name
|Type
|Description

|providers
|`PublisherProviders`
|An object containing a Hedera Client or a transaction Publisher (refer to <<providers-data-types>> for details).
|===


=== options Parameter

The table below details the structure of the `options` parameter.

[cols="1,1,3",options="header",frame="ends"]
|===
|Name
|Type
|Description

|options
|`SubmitCreateDIDRequestOptions`
|An object specifying configuration options for DID creation request (refer to <<options-data-types>> for details).
|===

== Return Value

Upon successful execution, the function returns a Promise that resolves to a `CreateDIDResult` object.

The table below describes the structure of the `CreateDIDResult` type.

[cols="1,1,3",options="header",frame="ends"]
|===
|Name
|Type
|Description

|did
|`string`
|The DID string of the newly created Decentralized Identifier.

|didDocument
|`DIDDocument`
|The DID Document associated with the newly created DID.
|===

== Data Types

This section elaborates on the data types employed within the `providers` and `options` parameters.

[[providers-data-types]]
=== PublisherProviders Type

To utilize this type, at least one of the following must be defined: `client` or `publisher`. If both are provided, `publisher` takes precedence.

The table below provides a detailed description of the `PublisherProviders` type.

[cols="1,1,3",options="header",frame="ends"]
|===
|Name
|Type
|Description

|clientOptions?
|`ClientOptions`
|Configuration options for instantiating a Hedera Client. See a full running link:https://github.com/Swiss-Digital-Assets-Institute/hashgraph-did-sdk-js/blob/main/examples/createDID-with-client-options.ts[example] in the source code.

|client?
|`Client`
|An instance of a Hedera Client. See a full running link:https://github.com/Swiss-Digital-Assets-Institute/hashgraph-did-sdk-js/blob/main/examples/createDID-with-a-client.ts[example] in the source code.

|publisher?
|`Publisher`
|An instance of a xref:04-implementation/components/publisher-guide.adoc[Publisher] responsible for submitting the DID creation transaction to the Hedera network.
|===

[[options-data-types]]
=== SubmitCreateDIDRequestOptions Type

The table below provides a detailed description of the `SubmitCreateDIDRequestOptions` type.

[cols="1,1,3",options="header",frame="ends"]
|===
|Name
|Type
|Description

|state
|`RunnerState<DIDOwnerMessage>`
|The `state` parameter is a RunnerState object that encapsulates the current state of the DID creation process. It is generated by the xref:04-implementation/components/generateCreateDIDRequest-api.adoc[`generateCreateDIDRequest`] function.

|signature
|`Uint8Array`
|The `signature` parameter is a Uint8Array containing the signature of the signing request. The signing request is generated by the xref:04-implementation/components/generateCreateDIDRequest-api.adoc[`generateCreateDIDRequest`] function.

|waitForDIDVisibility?
|`boolean`
|Whether to wait for the DID to be **visible** on the network. The DID registration transaction may be confirmed before the DID is actually accessible and usable on the network. This option ensures that the function waits until the DID is fully propagated and discoverable. If set to `false`, the function will return as soon as the registration transaction is confirmed, which may be faster but could lead to errors if you immediately try to use the DID. 

Defaults to `true`.

|visibilityTimeoutMs?
|`number`
|The maximum time (in milliseconds) to wait for the DID to be **visible** on the network. This option is only relevant if `waitForDIDVisibility` is set to `true`. If the DID is not visible within this timeout period, the function will throw an error. Defaults to 120000 milliseconds (2 minutes).


|topicReader?
|`TopicReader`
|An instance of a xref:04-implementation/components/topic-reader-api.adoc[TopicReader] responsible for reading messages from the Hedera network topic.
|===

== Errors

The following table enumerates the exceptions that may arise during the execution of the `submitCreateDIDRequest` function.

[cols="1,1",options="header",frame="ends"]
|===
|Exception code
|Description

|`invalidArgument`
|Providers must contain client options or client or publisher.

|`invalidArgument`
|Hashgraph SDK Client must be configured with a network.

|`invalidArgument`
|Hashgraph SDK Client must be configured with an operator account.

|`invalidArgument`
|Signature and verifier are required for the signature step.

|`internalError`
|Message awaiter timeout reached. Messages not found.

|`internalError`
|Failed to create the DID.
|===

== Function Implementation

The Hashgraph DID SDK provides a `submitCreateDIDRequest` function within its `registrar` package. For further details, refer to the xref:06-deployment/packages/index.adoc#essential-packages[`@hashgraph-did-sdk-js/registrar`] package documentation.