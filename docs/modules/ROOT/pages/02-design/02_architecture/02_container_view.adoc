=== Level 2: Container View

This view identifies the main containers (deployable/runnable units and libraries) inside the Hiero DID SDK JS and their relationships with external systems. It follows the C4 Model "Container" level.

image::container-view-diagram.png[]

==== Internal Containers (npm packages)

* core: Common types, interfaces, and utilities shared by all packages. xref:04-deployment/packages/index.adoc#_advanced_packages[ref]
* messages: DID message formats and lifecycle events. ref
* lifecycle: Async orchestration utilities for DID flows. ref
* registrar: High-level API to create/update/deactivate DIDs. Depends on messages, signer, publisher, hcs, client. xref:04-deployment/packages/index.adoc#_essential_packages[ref]
* resolver: High-level API to resolve DIDs from Hedera. Depends on hcs topic reader, cache, verifier, client. ref
* signer-internal: Local signing using Hedera PrivateKey. ref
* verifier-internal: Local verification of signatures. ref
* signer-hashicorp-vault (optional): Vault-backed signing. ref
* verifier-hashicorp-vault (optional): Vault-backed verification. ref
* publisher-internal: Publishes transactions to Hedera via Client. ref
* client: Configures and provides Hedera SDK Client per network. ref
* hcs: Abstraction over Hedera Consensus Service (publish/read topics). ref
* cache: In-memory cache primitives used by resolver and others. ref
* crypto: Cryptographic helpers (key/seed handling, hashing). ref
* zstd: Compression utilities used to reduce on-chain payload size. ref
* anoncreds: Hedera AnonCreds Registry integration per spec. ref

==== External Containers

* Hedera Nodes: Submit transactions (DID ops) to the network.
* Hedera Mirror Node: Read topic messages for resolution.
* HashiCorp Vault (optional): External KMS used by Vault signer/verifier.

==== Relationships

* registrar -> signer(-internal | -vault): to sign DID operations.
* registrar -> publisher-internal -> client -> Hedera Nodes: to submit HCS transactions.
* resolver -> hcs (Topic Reader) -> Mirror Node: to fetch topic messages; may use cache and zstd for performance.
* resolver -> verifier(-internal | -vault): to verify signatures of DID messages/documents.
* hcs -> client: to publish to HCS topics.
* anoncreds -> hcs/client: to interact with Hedera AnonCreds registry.

==== Notes

Each container is versioned and published independently, enabling consumers to choose only what they need. See xref:04-deployment/packages/index.adoc[Packages Guide] for details and links.
