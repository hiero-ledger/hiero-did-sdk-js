=== Level 2: Container View

This view identifies the main containers (xref:04-deployment/packages/index.adoc[runnable units and libraries]) inside the Hiero DID SDK JS and their relationships with external systems. It follows the C4 Model "Container" level.

image::container-view-diagram.png[]

==== Internal Containers (xref:04-deployment/packages/index.adoc[npm packages])

* core: Common types, interfaces, and utilities shared by all packages.
* messages: DID message formats and lifecycle events.
* lifecycle: Async orchestration utilities for DID flows.
* registrar: High-level API to create/update/deactivate DIDs. Depends on messages, signer, publisher, hcs, client.
* resolver: High-level API to resolve DIDs from Hedera. Depends on hcs topic reader, cache, verifier, client.
* signer-internal: Local signing using Hedera PrivateKey.
* verifier-internal: Local verification of signatures.
* signer-hashicorp-vault (optional): Vault-backed signing.
* verifier-hashicorp-vault (optional): Vault-backed verification.
* publisher-internal: Publishes transactions to Hedera via Client.
* client: Configures and provides Hedera SDK Client per network.
* hcs: Abstraction over Hedera Consensus Service (publish/read topics).
* cache: In-memory cache primitives used by resolver and others.
* crypto: Cryptographic helpers (key/seed handling, hashing).
* zstd: Compression utilities used to reduce on-chain payload size.
* anoncreds: Hedera AnonCreds Registry implementation per spec.

==== External Containers

* Hedera Nodes: Submit transactions (DID ops) to the network.
* Hedera Mirror Node: Read topic info and messages for resolution.
* HashiCorp Vault (optional): External KMS used by Vault signer/verifier.

==== Relationships

* registrar -> signer(-internal | -vault): to sign DID operations.
* registrar -> publisher-internal -> client -> Hedera Nodes: to submit HCS transactions.
* resolver -> hcs (Topic Reader) -> Mirror Node: to fetch topic messages; may use cache and zstd for performance.
* resolver -> verifier(-internal | -vault): to verify signatures of DID messages/documents.
* hcs -> client: to publish to HCS topics.
* anoncreds -> hcs/client: to interact with Hedera AnonCreds registry.

==== Notes

Each container is versioned and published independently, enabling consumers to choose only what they need. See xref:04-deployment/packages/index.adoc[Packages Guide] for details and links.
